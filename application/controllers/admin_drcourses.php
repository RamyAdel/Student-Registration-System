<?phpclass admin_drcourses extends CI_Controller {    public function __construct()    {        parent::__construct();        if(!$this->session->userdata('logged_in')){            redirect('login');        }    }    public function courses_add()    {       $data['coursesss'] = $this->courses_model->get_coursesss();        $dr =  $this->Admin_model->get_user($this->session->userdata('user_name'));        if ($this->input->server('REQUEST_METHOD') === 'POST')        {            $fffxx = $this->input->post('matrial');                $this->load->helper(array('form', 'url'));                $config['upload_path']          = 'assets/mat';                $config['allowed_types']        = 'gif|jpg|png';                $config['max_size']             = 10000;                $this->load->library('upload', $config);                $this->upload->initialize($config);                if ( ! $this->upload->do_upload('matrial'))                {                        $this->load->view('admin/drcourses/add');                }                else                {                    $upload_data = $this->upload->data();                       $file_name =   $upload_data['file_name'];            $data_to_store = array(                    'name' => $this->input->post('name'),                    'number' => $this->input->post('number'),                    'duration' => $this->input->post('duration'),                    'credit' => $this->input->post('credit'),                    'professor' => $dr->name,                    'pre1' => $this->input->post('pre1'),                    'pre2' => $this->input->post('pre2'),                    'pre3' => $this->input->post('pre3'),                    'matrial' => $file_name,                    'scheduleday' => $this->input->post('scheduleday'),                    'totalstudent' => $this->input->post('totalstudent'),                    'seatleft' => $this->input->post('totalstudent'),                    'scheduledate' => $this->input->post('scheduledate'),                    'scheduletime' => $this->input->post('scheduletime'),                    'section' => $this->input->post('section'),                    'category' => $this->input->post('category'),                    'description' => $this->input->post('description'),                    );                }            if($this->dr_model->add_course($data_to_store)){                    redirect('drcourses');                }else{                    $data['flash_message'] = FALSE;                 }        }        $data['main_content'] = 'admin/drcourses/add';        $this->load->view('admin/includes/template', $data);      }    public function courses_update()    {        $data['coursesss'] = $this->courses_model->get_coursesss();        $dr =  $this->Admin_model->get_user($this->session->userdata('user_name'));        $id = $this->uri->segment(3);        $data['cour'] =  $this->courses_model->get_course_by_id($id);         if ($this->input->server('REQUEST_METHOD') === 'POST')        {                $data_to_store = array(                    'name' => $this->input->post('name'),                    'duration' => $this->input->post('duration'),                    'credit' => $this->input->post('credit'),                    'professor' => $dr->name,                    'pre1' => $this->input->post('pre1'),                    'pre2' => $this->input->post('pre2'),                    'pre3' => $this->input->post('pre3'),                    'matrial' => $this->input->post('matrial'),                    'scheduleday' => $this->input->post('scheduleday'),                    'totalstudent' => $this->input->post('totalstudent'),                    'seatleft' => $this->input->post('totalstudent'),                    'scheduledate' => $this->input->post('scheduledate'),                    'scheduletime' => $this->input->post('scheduletime'),                    'section' => $this->input->post('section'),                    'status' => $this->input->post('status'),                    'category' => $this->input->post('category'),                    );                if($this->courses_model->update_course($id ,$data_to_store)){         redirect('drcourses');                }else{                    $data['flash_message'] = FALSE;                 }        }        $data['main_content'] = 'admin/drcourses/update';        $this->load->view('admin/includes/template', $data);      }    public function courses_grade()    {        $data['coursesss'] = $this->courses_model->get_coursesss();        $dr =  $this->Admin_model->get_user($this->session->userdata('user_name'));        $id = $this->uri->segment(3);        $data['stu'] =  $this->courses_model->get_courseload_by_courseid($id);          $stu2 =  $this->courses_model->get_courseload_by_courseid($id);        $data['cour'] =  $this->courses_model->get_course_by_id($id);         if ($this->input->server('REQUEST_METHOD') === 'POST')        {            foreach ($stu2 as $item) {                 $zsx = array(                    'grade' => $this->input->post('grade'.$item['student']),                    'student' => $this->input->post('student'.$item['student']),                    'course' => $this->input->post('course'),                    );                if($this->dr_model->add_grade($zsx)){            $this->courses_model->trans_course($id, $item['student']);         $data['flash_message'] = TRUE;                }else{                    $data['flash_message'] = FALSE;                 }}redirect('drcourses');        }        $data['main_content'] = 'admin/drcourses/grade';        $this->load->view('admin/includes/template', $data);      }    public function courses_index()    {                $dr =  $this->Admin_model->get_user($this->session->userdata('user_name'));        $data['courses'] = $this->courses_model->get_course_by_dr($dr->name);        $data['main_content'] = 'admin/drcourses/list';        $this->load->view('admin/includes/template', $data);      }    public function courses_i()    {                $id = $this->uri->segment(2);        $data['courses'] = $this->courses_model->get_course_by_id($id);        $data['main_content'] = 'admin/courses/i';        $this->load->view('admin/includes/template', $data);      }       }